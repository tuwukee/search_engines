<h1><%= "Search Engines" %></h1>

<%= form_tag results_path, :method => :get do %>
  <div id="search">
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil, :class => "btn" %>
  </div>
<% end %>
<div class="row">
  <div class="span4">
    <% if @results %>
      <h5><%= "Sphinx search took #{@results.query_time} seconds ans return the following results:" %></h5></br>
      <ul>
        <% @results.each do |result| %>
          <li class="search_result">
            <div class="movie_name">
              <h3><%= (@excerpter.excerpt! result.movie.name).html_safe %>
              (<%= result.movie.year %>)</h3>
            </div>
            <div class="description">
              <%= (@excerpter.excerpt! result.description).html_safe %>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
  <div class="span4">
    <% if @solr_results %>
      <h5><%= "Solr search took #{@solr_time} seconds ans return the following results:" %></h5></br>
      <ul>
        <% @solr_results.each do |result| %>
          <li class="search_result">
            <div class="movie_name">
              <h3><%= result.movie.name.html_safe %>
              (<%= result.movie.year %>)</h3>
            </div>
            <div class="description">
              <%= result.description.html_safe %>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
  <div class="span4">
    <% if @pstg_results %>
      <h5><%= "Postgres Search return the following results:" %></h5></br>
      <ul>
        <% @pstg_results.each do |result| %>
          <li class="search_result">
            <div class="movie_name">
              <h3><%= result.movie.name.html_safe %>
              (<%= result.movie.year %>)</h3>
            </div>
            <div class="description">
              <%= result.description.html_safe %>
            </div>
          </li>
        <% end %>
      </ul>
    <% end %>
  </div>
</div>
